<!DOCTYPE html>
<html lang="fr">
<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta charset="UTF-8">
    <title>Budget Manager</title>
    <link href="css/index.css" rel="stylesheet" />
</head>
<body>
    <h1>Budget Manager (Incomes / Outcomes)</h1>

    <div class="section">
        <h2>Total global</h2>
        <button onclick="getTotal('incomes')">Total Incomes</button>
        <button onclick="getTotal('outcomes')">Total Outcomes</button>
        <pre id="total-result"></pre>
    </div>

    <div class="section">
        <h2>Total par mois</h2>
        <label>Année :</label>
        <input type="number" id="year-month" value="2025">
        <label>Mois :</label>
        <input type="number" id="month" value="7">
        <button onclick="getTotalByMonth('incomes')">Incomes</button>
        <button onclick="getTotalByMonth('outcomes')">Outcomes</button>
        <pre id="month-result"></pre>
    </div>

    <div class="section">
        <h2>Total par année</h2>
        <label>Année :</label>
        <input type="number" id="year-total" value="2025">
        <button onclick="getTotalByYear('incomes')">Incomes</button>
        <button onclick="getTotalByYear('outcomes')">Outcomes</button>
        <pre id="year-result"></pre>
    </div>

    <div class="section">
        <h2>Total sur une période</h2>
        <label>De :</label>
        <input type="date" id="start-date">
        <label>À :</label>
        <input type="date" id="end-date">
        <button onclick="getTotalByRange('incomes')">Incomes</button>
        <button onclick="getTotalByRange('outcomes')">Outcomes</button>
        <pre id="range-result"></pre>
    </div>

    <div class="section">
        <h2>Liste des Incomes</h2>
        <button onclick="fetchIncomes()">Charger les incomes</button>
        <table id="income-table">
            <thead>
                <tr><th>ID</th><th>Source</th><th>Amount</th><th>Date</th><th>Actions</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="section">
        <h2>Ajouter / Modifier un Income</h2>
        <label>ID (laisser vide pour ajout) :</label>
        <input type="number" id="income-id">
        <label>Source :</label>
        <select id="income-source"></select>
        <label>Amount :</label>
        <input type="number" id="income-amount" step="0.01">
        <label>Date :</label>
        <input type="date" id="income-date">
        <button onclick="saveIncome()">Enregistrer</button>
    </div>

    <div class="section">
        <h2>Afficher les Incomes par Source</h2>
        <label for="source-filter">Choisir une source :</label>
        <select id="source-filter"></select>
        <button onclick="fetchIncomesBySource()">Afficher</button>
        <table id="filtered-income-table">
            <thead>
                <tr><th>ID</th><th>Source</th><th>Amount</th><th>Date</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="section">
        <h2>Liste des Outcomes</h2>
        <button onclick="fetchOutcomes()">Charger les outcomes</button>
        <table id="outcome-table">
            <thead>
                <tr><th>ID</th><th>Source</th><th>Amount</th><th>Date</th><th>Actions</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="section">
        <h2>Ajouter / Modifier un Outcome</h2>
        <label>ID (laisser vide pour ajout) :</label>
        <input type="number" id="outcome-id">
        <label>Source :</label>
        <select id="outcome-source"></select>
        <label>Amount :</label>
        <input type="number" id="outcome-amount" step="0.01">
        <label>Date :</label>
        <input type="date" id="outcome-date">
        <button onclick="saveOutcome()">Enregistrer</button>
    </div>

    <div class="section">
        <h2>Afficher les Outcomes par Source</h2>
        <label for="source-filter-outcome">Choisir une source :</label>
        <select id="source-filter-outcome"></select>
        <button onclick="fetchOutcomesBySource()">Afficher</button>
        <table id="filtered-outcome-table">
            <thead>
                <tr><th>ID</th><th>Source</th><th>Amount</th><th>Date</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="section">
        <h2>Gestion des Sources</h2>

        <button onclick="fetchSources()">Charger les sources</button>
        <table id="source-table">
            <thead>
                <tr><th>ID</th><th>Nom</th><th>Actions</th></tr>
            </thead>
            <tbody></tbody>
        </table>

        <h3>Ajouter / Modifier une source</h3>
        <label>ID (laisser vide pour ajout) :</label>
        <input type="number" id="source-id">
        <label>Nom :</label>
        <input type="text" id="source-name">
        <button onclick="saveSource()">Enregistrer</button>
    </div>

    <div class="section">
        <h2>Graphique Incomes vs Outcomes par mois (2025)</h2>
        <canvas id="budgetChart" width="600" height="300"></canvas>
        <button onclick="loadChartData()">Charger le graphique</button>
    </div>

    <script src="js/index.js"></script>
</body>
</html>
